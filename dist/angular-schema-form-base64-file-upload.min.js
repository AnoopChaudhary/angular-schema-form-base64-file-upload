angular.module("templates",[]).run(["$templateCache",function(e){e.put("src/templates/angular-schema-form-base64-file-upload.html",'<div class="angular-schema-form--base64-file">\n  <label ng-hide="form.notitle">{{form.title}}</label>\n  <div base64-file-upload="form" sf-field-model schema-validate="form">\n    <label>\n      <input type="file" class="base64-file--input" style="display:none;" ng-disabled="file"/>\n      <div class="base64-file--drop-area" ng-class="{\'file-hovering\': dropAreaHover}">\n\n        <div class="base64-file--file" ng-show="file">\n          <div class="base64-file--file-preview"\n               ng-style="{\'background-image\': isImage(file) ? \'url(\' + file.src + \')\': \'\'}">\n            <span ng-show="!isImage(file)">{{file.ext}}</span>\n          </div>\n          <div class="base64-file--file-name">{{file.name}}</div>\n          <div class="base64-file--file-size">{{file.humanSize}}</div>\n          <div class="base64-file--file-remove" ng-click="removeFile($event)">&#10005</div>\n        </div>\n\n        <span ng-show="!file" class="base64-file--drop-area-description">{{form.placeholder || \'Click here or drop files to upload\'}}</span>\n      </div>\n    </label>\n  </div>\n  <span sf-message="form.description"></span>\n</div>\n')}]),angular.module("angularSchemaFormBase64FileUpload",["schemaForm","templates"]).config(["schemaFormDecoratorsProvider","sfBuilderProvider",function(e,a){e.defineAddOn("bootstrapDecorator","file","src/templates/angular-schema-form-base64-file-upload.html",a.stdBuilders)}]),angular.module("angularSchemaFormBase64FileUpload").directive("base64FileUpload",["$timeout",function(e){return{restrict:"A",require:"ngModel",scope:!0,link:function(a,i,n,l){a.ngModel=l,a.dropAreaHover=!1,a.file=void 0,a.fileImagePreview="";var r=function(e){var i=!0,l=a.$eval(n.base64FileUpload).schema;return e.size>parseInt(l.maxSize,10)&&(i=!1),i},o=function(i){if(i){if(!r(i))return l.$setValidity("base64FileUpload",!1),void a.$apply();e(function(){l.$setValidity("base64FileUpload",!0),a.file=i,a.file.ext=i.name.split(".").slice(-1)[0],a.file.src=URL.createObjectURL(i);var e=i.size/1024,n="kB";e>1024&&(e/=1024,n="MB"),a.file.humanSize=e.toFixed(1)+" "+n},0);var n=new FileReader;n.onloadstart=function(i){e(function(){a.loadingFile=!0},0)},n.onload=function(i){e(function(){a.loadingFile=!1},0),l.$setViewValue(i.target.result)},n.readAsDataURL(i)}};a.isImage=function(e){return e?e.type.indexOf("image")>-1:!1},a.removeFile=function(e){e.preventDefault(),e.stopPropagation(),a.file=void 0,l.$setViewValue(void 0)},i.find("input").bind("change",function(e){o(e.target.files[0])});var t=document.getElementsByClassName("base64-file--drop-area")[0];t.addEventListener("dragenter",function(i){i.preventDefault(),i.stopPropagation(),e(function(){a.dropAreaHover=!0},0)},!1),t.addEventListener("dragleave",function(i){i.preventDefault(),i.stopPropagation(),e(function(){a.dropAreaHover=!1},0)},!1),t.addEventListener("dragover",function(i){i.preventDefault(),i.stopPropagation(),e(function(){a.dropAreaHover=!0},0)},!1),t.addEventListener("drop",function(i){i.preventDefault(),i.stopPropagation(),e(function(){a.dropAreaHover=!1},0),o(i.dataTransfer.files[0])},!1)}}}]);